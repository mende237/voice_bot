{% extends 'base.html' %}

{% load static %}
{% block corps %}
<div class="container">
    <form action="{% url 'adminin:modifier_feuille' %}" method="get" class="mt-3">

        <input type="hidden" name="id_feuille" value="{{ id_feuille }}">

        <!-- nom de la feuille -->
        <div class="form-group m-1">
            <label for="nom">Nom de la feuille </label>
            <input type="text" name="nom" class="form-control" value="{{ nom }}">
        </div>

        <!-- description de la feuille -->
        <div class="form-group m-1 mt-3">
            <label for="description">Description</label>
            <textarea class="form-control w-100" name="description" rows="2">
            </textarea>
        </div>

        <!-- caracteristiques de la feuille -->
        <div class="mt-3">
            <div class="py-2">
                <h5>Caracteristiques</h5>
                <button type="button" class="btn btn-sm btn-primary btn-sm " data-bs-toggle="modal"
                    data-bs-target="#__">
                    <i class="fa fa-plus"></i>
                    ajouter
                </button>
            </div>
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr role="row">
                            <th>Noms</th>
                            <th>Types</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for car in cars %}
                        <tr>
                            <td><span class="d-block py-2">{{ car.nom }}</span></td>
                            <td><span class="d-block py-2">{{ car.type }}</span></td>
                            <td>
                                <div class="d-flex py-2">
                                    <a href="{% url 'adminin:delete_caracteristique' id_feuille=id_feuille id_car=car.id %}"
                                        class="btn btn-danger btn-circle btn-sm">
                                        <i class="fa fa-trash"></i>
                                    </a>
                                    <button type="button" class="btn btn-warning btn-circle btn-sm"
                                        data-bs-toggle="modal" data-bs-target="#__{{ car.id }}">
                                        <i class="fa fa-cogs"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="form-group text-center mt-2">
            <button type="submit" class="btn btn-sm btn-primary"> sauvegarder </button>
        </div>

    </form>
</div>
{% endblock %}

{% block secondblock %}
<div class="modal fade" id="__" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body">
                <form action="{% url 'adminin:ajouter_caracteristique' %}" class="m-1" method="get">
                    <input type="hidden" name="id_feuille" value="{{ id_feuille }}">
                    <div class="form-floating my-1">
                        <input type="text" class="form-control rounded-0" name="nom">
                        <label for="nom"> nom de la caracteristique </label>
                    </div>
                    <div class="my-1">
                        <label for="type"> type de la caracteristique </label>
                        <select name="type" class="form-control">
                            {% for choice in choices %}
                            <option value="{{choice.0}}">{{choice.1}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary m-1 border-0">valider</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% for car in cars %}
<div class="modal fade" id="__{{ car.id }}" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body">
                <form action="{% url 'adminin:modif_caracteristique' %}" class="m-1" method="get">
                    <input type="hidden" name="id_feuille" value="{{ id_feuille }}">
                    <input type="hidden" name="id_car" value="{{ car.id }}">
                    <div class="form-floating my-1">
                        <input type="text" class="form-control rounded-0" name="nom" value="{{ car.nom }}">
                        <label for="nom"> nom de la caracteristique </label>
                    </div>
                    <div class="my-1">
                        <label for="type"> type de la caracteristique </label>
                        <select name="type" class="form-control">
                            {% for choice in choices %}
                            <option value="{{choice.0}}">{{choice.1}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary m-1 border-0">valider</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endfor %}
{% endblock %}

{% block javascript %}
<!-- Bootstrap core JavaScript-->
<script src="{% static 'assets/vendor/jquery/jquery.min.js' %}"></script>
<script src="{% static 'assets/js/bootstrap.bundle.min.js' %}"></script>

<!-- Core plugin JavaScript-->
<script src="{% static 'assets/vendor/jquery-easing/jquery.easing.min.js' %}"></script>

<!-- Custom scripts for all pages-->
<script src="{% static 'assets/js/sb-admin-2.min.js'%}"></script>

<!-- Page level plugins -->
<script src="{% static 'assets/vendor/datatables/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'assets/vendor/datatables/dataTables.bootstrap4.min.js' %}"></script>

<script src="{% static 'js/perso/table.js' %}"></script>
{% endblock %}